{"ast":null,"code":"var _jsxFileName = \"/Users/Nikitarad/2048app/front/src/App.js\",\n    _s2 = $RefreshSig$();\n\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\nimport React, { useEffect, useState } from \"react\";\nimport cloneDeep from \"lodash.clonedeep\";\nimport { useEvent, getColors } from \"./util\";\nimport './App.css';\nimport Swipe from \"react-easy-swipe\";\nimport { useGameContext } from \"./gameContext\"; //import {SwipeRight} from \"./swipes\"\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const UP_ARROW = 38;\n  const DOWN_ARROW = 40;\n  const LEFT_ARROW = 37;\n  const RIGHT_ARROW = 39;\n  const {\n    data,\n    setData,\n    gameOver,\n    setGameOver\n  } = useGameContext(); // Initialize\n\n  const initialize = () => {\n    // console.log(\"CALLING INITIALIZE\");\n    let newGrid = cloneDeep(data);\n    let newClone = cloneDeep(data);\n    console.log(newGrid);\n    addNumber(newGrid);\n    console.table(newGrid);\n    addNumber(newGrid);\n    console.table(newGrid);\n    setData(newGrid);\n  }; // AddNumber - Add an item\n\n\n  const addNumber = newGrid => {\n    let added = false;\n    let gridFull = false;\n    let attempts = 0;\n\n    while (!added) {\n      if (gridFull) {\n        break;\n      }\n\n      let rand1 = Math.floor(Math.random() * 4);\n      let rand2 = Math.floor(Math.random() * 4);\n      attempts++;\n\n      if (newGrid[rand1][rand2] === 0) {\n        newGrid[rand1][rand2] = Math.random() > 0.5 ? 2 : 4;\n        added = true;\n      }\n\n      if (attempts > 50) {\n        gridFull = true;\n        let gameOverr = checkIfGameOver();\n\n        if (gameOverr) {\n          alert(\"game over\");\n          setGameOver(true);\n        } //setGameOver(true);\n\n      }\n    }\n  }; // Swipe - Right, Left, Up, Down\n  // Swipe Left\n\n\n  const swipeLeft = dummy => {\n    console.log(\"swipe left\");\n    let oldGrid = data;\n    let newArray = cloneDeep(data);\n\n    for (let i = 0; i < 4; i++) {\n      let b = newArray[i];\n      let slow = 0;\n      let fast = 1;\n\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(oldGrid) !== JSON.stringify(newArray)) {\n      addNumber(newArray);\n    }\n\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  }; // Swipe Right\n\n\n  const SwipeRight = dummy => {\n    _s();\n\n    const {\n      data,\n      addNumber,\n      setData\n    } = useGameContext();\n    console.log(\"swipe right\");\n    let oldData = data;\n    let newArray = cloneDeep(data);\n\n    for (let i = 3; i >= 0; i--) {\n      let b = newArray[i];\n      let slow = b.length - 1;\n      let fast = slow - 1;\n\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(newArray) !== JSON.stringify(oldData)) {\n      addNumber(newArray);\n    }\n\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  }; // Swipe Down\n\n\n  _s(SwipeRight, \"1PChmyrJRBXCV6gNisDlkfg6lDg=\", false, function () {\n    return [useGameContext];\n  });\n\n  const swipeDown = dummy => {\n    console.log(\"swipe down\");\n    console.log(data);\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n\n    for (let i = 3; i >= 0; i--) {\n      let slow = b.length - 1;\n      let fast = slow - 1;\n\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(b) !== JSON.stringify(oldData)) {\n      addNumber(b);\n    }\n\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  }; // Swipe Up\n\n\n  const swipeUp = dummy => {\n    console.log(\"swipe up\");\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n\n    for (let i = 0; i < 4; i++) {\n      let slow = 0;\n      let fast = 1;\n\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(oldData) !== JSON.stringify(b)) {\n      addNumber(b);\n    }\n\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  }; // CheckGameover\n\n\n  const checkIfGameOver = () => {\n    console.log(\"CHECKING GAME OVER\"); // let original = cloneDeep(data);\n\n    let checker = swipeLeft(true);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker)) {\n      return false;\n    }\n\n    let checker2 = swipeDown(true);\n    console.log(\"CHECKER DOWN\");\n    console.table(data);\n    console.table(checker2);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker2)) {\n      return false;\n    }\n\n    let checker3 = SwipeRight(true);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker3)) {\n      return false;\n    }\n\n    let checker4 = swipeUp(true);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker4)) {\n      return false;\n    }\n\n    return true;\n  }; // Reset\n\n\n  const resetGame = () => {\n    setGameOver(false);\n    const emptyGrid = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n    addNumber(emptyGrid);\n    addNumber(emptyGrid);\n    setData(emptyGrid);\n  }; // HANDLE KEY DOWN\n\n\n  const handleKeyDown = event => {\n    if (gameOver) {\n      return;\n    }\n\n    switch (event.keyCode) {\n      case UP_ARROW:\n        // alert(\"up\");\n        // console.table(data);\n        swipeUp(); // console.table(data);\n\n        break;\n\n      case DOWN_ARROW:\n        // console.table(data);\n        swipeDown(); // console.table(data);\n\n        break;\n\n      case LEFT_ARROW:\n        // console.table(data);\n        swipeLeft(); // console.table(data);\n\n        break;\n\n      case RIGHT_ARROW:\n        // console.table(data);\n        SwipeRight(true); // console.table(data);\n\n        break;\n\n      default:\n        break;\n    }\n\n    let gameOverr = checkIfGameOver();\n\n    if (gameOverr) {\n      alert(\"game over\");\n      setGameOver(true);\n    }\n  };\n\n  useEffect(() => {\n    initialize(); //document.addEventListener('keydown',handleKeyDown);\n    // eslint-disable-next-line\n  }, []);\n  useEvent(\"keydown\", handleKeyDown);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 345,\n        margin: \"auto\",\n        marginTop: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontFamily: \"sans-serif\",\n            flex: 1,\n            fontWeight: \"700\",\n            fontSize: 60,\n            color: \"#776e65\"\n          },\n          children: \"2048\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1,\n            marginTop: \"auto\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: resetGame,\n            style: style.newGameButton,\n            children: \"NEW GAME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"#AD9D8F\",\n          width: \"max-content\",\n          height: \"max-content\",\n          margin: \"auto\",\n          padding: 5,\n          borderRadius: 5,\n          marginTop: 10,\n          position: \"relative\"\n        },\n        children: [gameOver && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: style.gameOverOverlay,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 30,\n                fontFamily: \"sans-serif\",\n                fontWeight: \"900\",\n                color: \"#776E65\"\n              },\n              children: \"Game Over\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1,\n                  marginTop: \"auto\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: resetGame,\n                  style: style.tryAgainButton,\n                  children: \"Try Again\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Swipe, {\n          onSwipeDown: () => {\n            swipeDown();\n          },\n          onSwipeLeft: () => swipeLeft(),\n          onSwipeRight: () => SwipeRight(true),\n          onSwipeUp: () => swipeUp(),\n          style: {\n            overflowY: \"hidden\"\n          },\n          children: data.map((row, oneIndex) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\"\n              },\n              children: row.map((digit, index) => /*#__PURE__*/_jsxDEV(Block, {\n                num: digit\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 21\n              }, this))\n            }, oneIndex, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"inherit\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"game-explanation\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            class: \"important\",\n            children: \"How to play:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this), \" Use your\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"arrow keys\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this), \" to move the tiles. When two tiles with the same number touch, they \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"merge into one!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 364,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"3964iueF7CHHlmsL6SJArTsZGic=\", false, function () {\n  return [useGameContext, useEvent];\n});\n\n_c = App;\n\nconst Block = ({\n  num\n}) => {\n  const {\n    blockStyle\n  } = style;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: { ...blockStyle,\n      background: getColors(num),\n      color: num === 2 || num === 4 ? \"#645B52\" : \"#F7F4EF\"\n    },\n    children: num !== 0 ? num : \"\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 474,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = Block;\nconst style = {\n  blockStyle: {\n    height: 80,\n    width: 80,\n    background: \"lightgray\",\n    margin: 3,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontSize: 45,\n    fontWeight: \"800\",\n    color: \"white\"\n  }\n};\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Block\");","map":{"version":3,"sources":["/Users/Nikitarad/2048app/front/src/App.js"],"names":["disableBodyScroll","enableBodyScroll","clearAllBodyScrollLocks","React","useEffect","useState","cloneDeep","useEvent","getColors","Swipe","useGameContext","App","UP_ARROW","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","data","setData","gameOver","setGameOver","initialize","newGrid","newClone","console","log","addNumber","table","added","gridFull","attempts","rand1","Math","floor","random","rand2","gameOverr","checkIfGameOver","alert","swipeLeft","dummy","oldGrid","newArray","i","b","slow","fast","JSON","stringify","SwipeRight","oldData","length","swipeDown","parse","swipeUp","checker","checker2","checker3","checker4","resetGame","emptyGrid","handleKeyDown","event","keyCode","width","margin","marginTop","display","fontFamily","flex","fontWeight","fontSize","color","style","newGameButton","background","height","padding","borderRadius","position","gameOverOverlay","tryAgainButton","overflowY","map","row","oneIndex","digit","index","Block","num","blockStyle","justifyContent","alignItems"],"mappings":"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","sourcesContent":["\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\nimport React, { useEffect, useState } from \"react\";\nimport cloneDeep from \"lodash.clonedeep\";\nimport { useEvent, getColors } from \"./util\";\n\nimport './App.css';\nimport Swipe from \"react-easy-swipe\";\nimport {useGameContext} from \"./gameContext\";\n//import {SwipeRight} from \"./swipes\"\n\nfunction App() {\n\n  const UP_ARROW = 38;\n  const DOWN_ARROW = 40;\n  const LEFT_ARROW = 37;\n  const RIGHT_ARROW = 39;\n\n  const {data, setData, gameOver, setGameOver} = useGameContext();\n\n// Initialize\n  const initialize = () => {\n    // console.log(\"CALLING INITIALIZE\");\n\n    let newGrid = cloneDeep(data);\n    let newClone = cloneDeep(data);\n    console.log(newGrid);\n\n    addNumber(newGrid);\n    console.table(newGrid);\n    addNumber(newGrid);\n    console.table(newGrid);\n    setData(newGrid);\n  };\n\n\n\n// AddNumber - Add an item\nconst addNumber = (newGrid) => {\n  let added = false;\n  let gridFull = false;\n  let attempts = 0;\n  while (!added) {\n    if (gridFull) {\n      break;\n    }\n\n    let rand1 = Math.floor(Math.random() * 4);\n    let rand2 = Math.floor(Math.random() * 4);\n    attempts++;\n    if (newGrid[rand1][rand2] === 0) {\n      newGrid[rand1][rand2] = Math.random() > 0.5 ? 2 : 4;\n      added = true;\n    \n    }\n    \n    if (attempts > 50) {\n      gridFull = true;\n      let gameOverr = checkIfGameOver();\n      if (gameOverr) {\n        alert(\"game over\");\n        setGameOver(true);\n      }\n      //setGameOver(true);\n    }\n\n  }\n};\n  \n\n// Swipe - Right, Left, Up, Down\n\n  // Swipe Left\n  const swipeLeft = (dummy) => {\n    console.log(\"swipe left\");\n    let oldGrid = data;\n    let newArray = cloneDeep(data);\n\n    for (let i = 0; i < 4; i++) {\n      let b = newArray[i];\n      let slow = 0;\n      let fast = 1;\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(oldGrid) !== JSON.stringify(newArray)) {\n      addNumber(newArray);\n    }\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  };\n// Swipe Right\nconst SwipeRight = (dummy) => {\n    \n\n  const {data, addNumber, setData} = useGameContext();\n    console.log(\"swipe right\");\n    let oldData = data;\n    let newArray = cloneDeep(data);\n\n    \n\n    for (let i = 3; i >= 0; i--) {\n      let b = newArray[i];\n      let slow = b.length - 1;\n      let fast = slow - 1;\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(newArray) !== JSON.stringify(oldData)) {\n      addNumber(newArray);\n    }\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  };\n// Swipe Down\n  const swipeDown = (dummy) => {\n    console.log(\"swipe down\");\n    console.log(data);\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n    for (let i = 3; i >= 0; i--) {\n      let slow = b.length - 1;\n      let fast = slow - 1;\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(b) !== JSON.stringify(oldData)) {\n      addNumber(b);\n    }\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  };\n// Swipe Up\n  const swipeUp = (dummy) => {\n    console.log(\"swipe up\");\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n    for (let i = 0; i < 4; i++) {\n      let slow = 0;\n      let fast = 1;\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(oldData) !== JSON.stringify(b)) {\n      addNumber(b);\n    }\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  };\n\n\n// CheckGameover\nconst checkIfGameOver = () => {\n  console.log(\"CHECKING GAME OVER\");\n  // let original = cloneDeep(data);\n  let checker = swipeLeft(true);\n\n  if (JSON.stringify(data) !== JSON.stringify(checker)) {\n    return false;\n  }\n\n  let checker2 = swipeDown(true);\n  console.log(\"CHECKER DOWN\");\n  console.table(data);\n  console.table(checker2);\n  if (JSON.stringify(data) !== JSON.stringify(checker2)) {\n    return false;\n  }\n\n  let checker3 = SwipeRight(true);\n\n  if (JSON.stringify(data) !== JSON.stringify(checker3)) {\n    return false;\n  }\n\n  let checker4 = swipeUp(true);\n\n  if (JSON.stringify(data) !== JSON.stringify(checker4)) {\n    return false;\n  }\n\n  return true;\n};\n\n\n// Reset\n\nconst resetGame = () => {\n  setGameOver(false);\n  const emptyGrid = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  addNumber(emptyGrid);\n  addNumber(emptyGrid);\n  setData(emptyGrid);\n};\n\n// HANDLE KEY DOWN\nconst handleKeyDown = (event) => {\n  if(gameOver){\n    return;\n  }\n\n  \n  switch (event.keyCode) {\n    case UP_ARROW:\n      // alert(\"up\");\n      // console.table(data);\n      swipeUp();\n      // console.table(data);\n      break;\n    case DOWN_ARROW:\n      // console.table(data);\n      swipeDown();\n      // console.table(data);\n      break;\n    case LEFT_ARROW:\n      // console.table(data);\n      swipeLeft();\n      // console.table(data);\n      break;\n    case RIGHT_ARROW:\n      // console.table(data);\n      SwipeRight(true);\n      // console.table(data);\n      break;\n    default:\n      break;\n  }\n\n  let gameOverr = checkIfGameOver();\n  if (gameOverr) {\n    alert(\"game over\");\n    setGameOver(true);\n  }\n\n};\n\n\n\n\nuseEffect(() => {\n  initialize();\n  //document.addEventListener('keydown',handleKeyDown);\n  // eslint-disable-next-line\n}, []);\n\n  useEvent(\"keydown\",handleKeyDown);\n\n  return (\n    <div className=\"App\">\n      <div\n        style={{\n          width: 345,\n          margin: \"auto\",\n          marginTop: 30,\n        }}\n      >\n        <div style={{ display: \"flex\" }}>\n          <div\n            style={{\n              fontFamily: \"sans-serif\",\n              flex: 1,\n              fontWeight: \"700\",\n              fontSize: 60,\n              color: \"#776e65\",\n            }}\n          >\n            2048\n          </div>\n          <div\n            style={{\n              flex: 1,\n              marginTop: \"auto\",\n            }}\n          >\n            <div onClick={resetGame} style={style.newGameButton}>\n              NEW GAME\n            </div>\n          </div>\n        </div>\n        <div\n          style={{\n            background: \"#AD9D8F\",\n            width: \"max-content\",\n            height: \"max-content\",\n            margin: \"auto\",\n            padding: 5,\n            borderRadius: 5,\n            marginTop: 10,\n            position: \"relative\",\n          }}\n        >\n          {gameOver && (\n            <div style={style.gameOverOverlay}>\n              <div>\n                <div\n                  style={{\n                    fontSize: 30,\n                    fontFamily: \"sans-serif\",\n                    fontWeight: \"900\",\n                    color: \"#776E65\",\n                  }}\n                >\n                  Game Over\n                </div>\n                <div>\n                  <div\n                    style={{\n                      flex: 1,\n                      marginTop: \"auto\",\n                    }}\n                  >\n                    <div onClick={resetGame} style={style.tryAgainButton}>\n                      Try Again\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          <Swipe\n            onSwipeDown={() => {\n              swipeDown();\n            }}\n            onSwipeLeft={() => swipeLeft()}\n            onSwipeRight={() => SwipeRight(true)}\n            onSwipeUp={() => swipeUp()}\n            style={{ overflowY: \"hidden\" }}\n          >\n            {data.map((row, oneIndex) => {\n              return (\n                <div style={{ display: \"flex\" }} key={oneIndex}>\n                  {row.map((digit, index) => (\n                    <Block num={digit} key={index} />\n                  ))}\n                </div>\n              );\n            })}\n          </Swipe>\n        </div>\n\n        <div style={{ width: \"inherit\" }}>\n          <p class=\"game-explanation\">\n            <strong class=\"important\">How to play:</strong> Use your{\" \"}\n            <strong>arrow keys</strong> to move the tiles. When two tiles with\n            the same number touch, they <strong>merge into one!</strong>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\nconst Block = ({num})=>{\n  const { blockStyle } = style;\n\n  return (\n    <div\n      style={{\n        ...blockStyle,\n        background: getColors(num),\n        color: num === 2 || num === 4 ? \"#645B52\" : \"#F7F4EF\",\n      }}\n    >\n     \n      {num !== 0 ? num : \"\"}\n    </div>\n  );\n}\n\nconst style = {\n  blockStyle: {\n    height: 80,\n    width: 80,\n    background: \"lightgray\",\n    margin: 3,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontSize: 45,\n    fontWeight: \"800\",\n    color: \"white\",\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}