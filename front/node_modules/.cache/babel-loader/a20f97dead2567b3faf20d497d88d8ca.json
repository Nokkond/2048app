{"ast":null,"code":"var _jsxFileName = \"/Users/Nikitarad/2048app/front/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport cloneDeep from \"lodash.clonedeep\";\nimport { useEvent, getColors } from \"./util\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const UP_ARROW = 38;\n  const DOWN_ARROW = 40;\n  const LEFT_ARROW = 37;\n  const RIGHT_ARROW = 39;\n  const [data, setData] = useState([[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]); // Initialize\n\n  const initialize = () => {\n    // console.log(\"CALLING INITIALIZE\");\n    let newGrid = cloneDeep(data);\n    let newClone = cloneDeep(data);\n    console.log(newGrid);\n    addNumber(newGrid);\n    console.table(newGrid);\n    addNumber(newGrid);\n    console.table(newGrid);\n    setData(newGrid);\n  }; // AddNumber - Add an item\n\n\n  const addNumber = newGrid => {\n    let added = false;\n    let gridFull = false;\n    let attempts = 0;\n\n    while (!added) {\n      if (gridFull) {\n        break;\n      }\n\n      let rand1 = Math.floor(Math.random() * 4);\n      let rand2 = Math.floor(Math.random() * 4);\n      attempts++;\n\n      if (newGrid[rand1][rand2] === 0) {\n        newGrid[rand1][rand2] = Math.random() > 0.5 ? 2 : 4;\n        added = true;\n      }\n\n      if (attempts > 50) {\n        gridFull = true;\n        let gameOverr = checkIfGameOver();\n\n        if (gameOverr) {\n          alert(\"game over\");\n          setGameOver(true);\n        }\n\n        setGameOver(true);\n      }\n    }\n  }; // Swipe - Right, Left, Up, Down\n  // Swipe Left\n\n\n  const swipeLeft = dummy => {\n    console.log(\"swipe left\");\n    let oldGrid = data;\n    let newArray = cloneDeep(data);\n\n    for (let i = 0; i < 4; i++) {\n      let b = newArray[i];\n      let slow = 0;\n      let fast = 1;\n\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(oldGrid) !== JSON.stringify(newArray)) {\n      addNumber(newArray);\n    }\n\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  }; // Swipe Right\n\n\n  const swipeRight = dummy => {\n    console.log(\"swipe right\");\n    let oldData = data;\n    let newArray = cloneDeep(data);\n\n    for (let i = 3; i >= 0; i--) {\n      let b = newArray[i];\n      let slow = b.length - 1;\n      let fast = slow - 1;\n\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(newArray) !== JSON.stringify(oldData)) {\n      addNumber(newArray);\n    }\n\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  }; // Swipe Down\n\n\n  const swipeDown = dummy => {\n    console.log(\"swipe down\");\n    console.log(data);\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n\n    for (let i = 3; i >= 0; i--) {\n      let slow = b.length - 1;\n      let fast = slow - 1;\n\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(b) !== JSON.stringify(oldData)) {\n      addNumber(b);\n    }\n\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  }; // Swipe Up\n\n\n  const swipeUp = dummy => {\n    console.log(\"swipe up\");\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n\n    for (let i = 0; i < 4; i++) {\n      let slow = 0;\n      let fast = 1;\n\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n\n    if (JSON.stringify(oldData) !== JSON.stringify(b)) {\n      addNumber(b);\n    }\n\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  }; // CheckGameover\n\n\n  const checkIfGameOver = () => {\n    console.log(\"CHECKING GAME OVER\"); // let original = cloneDeep(data);\n\n    let checker = swipeLeft(true);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker)) {\n      return false;\n    }\n\n    let checker2 = swipeDown(true);\n    console.log(\"CHECKER DOWN\");\n    console.table(data);\n    console.table(checker2);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker2)) {\n      return false;\n    }\n\n    let checker3 = swipeRight(true);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker3)) {\n      return false;\n    }\n\n    let checker4 = swipeUp(true);\n\n    if (JSON.stringify(data) !== JSON.stringify(checker4)) {\n      return false;\n    }\n\n    return true;\n  }; // Reset\n  // HANDLE KEY DOWN\n\n\n  const handleKeyDown = event => {\n    switch (event.keyCode) {\n      case UP_ARROW:\n        // alert(\"up\");\n        // console.table(data);\n        swipeUp(); // console.table(data);\n\n        break;\n\n      case DOWN_ARROW:\n        // console.table(data);\n        swipeDown(); // console.table(data);\n\n        break;\n\n      case LEFT_ARROW:\n        // console.table(data);\n        swipeLeft(); // console.table(data);\n\n        break;\n\n      case RIGHT_ARROW:\n        // console.table(data);\n        swipeRight(); // console.table(data);\n\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  useEffect(() => {\n    initialize(); //document.addEventListener('keydown',handleKeyDown);\n    // eslint-disable-next-line\n  }, []);\n  useEvent(\"keydown\", handleKeyDown);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: \"#AD9D8F\",\n      width: \"max-content\",\n      height: \"max-content\",\n      margin: \"auto\",\n      padding: 5,\n      borderRadius: 5,\n      marginTop: 10,\n      position: \"relative\"\n    },\n    children: data.map((row, oneIndex) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        children: row.map((digit, index) => /*#__PURE__*/_jsxDEV(Block, {\n          num: digit\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 21\n        }, this))\n      }, oneIndex, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 336,\n    columnNumber: 7\n  }, this);\n}\n\n_s(App, \"uO62n0SiYGVPmUqy2x5y6IeumHs=\", false, function () {\n  return [useEvent];\n});\n\n_c = App;\n\nconst Block = ({\n  num\n}) => {\n  const {\n    blockStyle\n  } = style;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: { ...blockStyle,\n      background: getColors(num),\n      color: num === 2 || num === 4 ? \"#645B52\" : \"#F7F4EF\"\n    },\n    children: num !== 0 ? num : \"\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = Block;\nconst style = {\n  blockStyle: {\n    height: 80,\n    width: 80,\n    background: \"lightgray\",\n    margin: 3,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontSize: 45,\n    fontWeight: \"800\",\n    color: \"white\"\n  }\n};\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Block\");","map":{"version":3,"sources":["/Users/Nikitarad/2048app/front/src/App.js"],"names":["React","useEffect","useState","cloneDeep","useEvent","getColors","App","UP_ARROW","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","data","setData","initialize","newGrid","newClone","console","log","addNumber","table","added","gridFull","attempts","rand1","Math","floor","random","rand2","gameOverr","checkIfGameOver","alert","setGameOver","swipeLeft","dummy","oldGrid","newArray","i","b","slow","fast","JSON","stringify","swipeRight","oldData","length","swipeDown","parse","swipeUp","checker","checker2","checker3","checker4","handleKeyDown","event","keyCode","background","width","height","margin","padding","borderRadius","marginTop","position","map","row","oneIndex","display","digit","index","Block","num","blockStyle","style","color","justifyContent","alignItems","fontSize","fontWeight"],"mappings":"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","sourcesContent":["\nimport React, { useEffect, useState } from \"react\";\nimport cloneDeep from \"lodash.clonedeep\";\nimport { useEvent, getColors } from \"./util\";\nimport './App.css';\n\nfunction App() {\n  const UP_ARROW = 38;\n  const DOWN_ARROW = 40;\n  const LEFT_ARROW = 37;\n  const RIGHT_ARROW = 39;\n\n  const [data,setData] = useState([\n    [0,0,0,0],\n    [0,0,0,0],\n    [0,0,0,0],\n    [0,0,0,0],\n  ]\n    );\n\n\n// Initialize\n  const initialize = () => {\n    // console.log(\"CALLING INITIALIZE\");\n\n    let newGrid = cloneDeep(data);\n    let newClone = cloneDeep(data);\n    console.log(newGrid);\n\n    addNumber(newGrid);\n    console.table(newGrid);\n    addNumber(newGrid);\n    console.table(newGrid);\n    setData(newGrid);\n  };\n\n\n\n// AddNumber - Add an item\nconst addNumber = (newGrid) => {\n  let added = false;\n  let gridFull = false;\n  let attempts = 0;\n  while (!added) {\n    if (gridFull) {\n      break;\n    }\n\n    let rand1 = Math.floor(Math.random() * 4);\n    let rand2 = Math.floor(Math.random() * 4);\n    attempts++;\n    if (newGrid[rand1][rand2] === 0) {\n      newGrid[rand1][rand2] = Math.random() > 0.5 ? 2 : 4;\n      added = true;\n    \n    }\n    \n    if (attempts > 50) {\n      gridFull = true;\n      let gameOverr = checkIfGameOver();\n      if (gameOverr) {\n        alert(\"game over\");\n        setGameOver(true);\n      }\n      setGameOver(true);\n    }\n\n  }\n};\n  \n\n// Swipe - Right, Left, Up, Down\n\n  // Swipe Left\n  const swipeLeft = (dummy) => {\n    console.log(\"swipe left\");\n    let oldGrid = data;\n    let newArray = cloneDeep(data);\n\n    for (let i = 0; i < 4; i++) {\n      let b = newArray[i];\n      let slow = 0;\n      let fast = 1;\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast++;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(oldGrid) !== JSON.stringify(newArray)) {\n      addNumber(newArray);\n    }\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  };\n// Swipe Right\n  const swipeRight = (dummy) => {\n    console.log(\"swipe right\");\n    let oldData = data;\n    let newArray = cloneDeep(data);\n\n    for (let i = 3; i >= 0; i--) {\n      let b = newArray[i];\n      let slow = b.length - 1;\n      let fast = slow - 1;\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n        if (b[slow] === 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] === 0 && b[fast] !== 0) {\n          b[slow] = b[fast];\n          b[fast] = 0;\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] === 0) {\n          fast--;\n        } else if (b[slow] !== 0 && b[fast] !== 0) {\n          if (b[slow] === b[fast]) {\n            b[slow] = b[slow] + b[fast];\n            b[fast] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(newArray) !== JSON.stringify(oldData)) {\n      addNumber(newArray);\n    }\n    if (dummy) {\n      return newArray;\n    } else {\n      setData(newArray);\n    }\n  };\n// Swipe Down\n  const swipeDown = (dummy) => {\n    console.log(\"swipe down\");\n    console.log(data);\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n    for (let i = 3; i >= 0; i--) {\n      let slow = b.length - 1;\n      let fast = slow - 1;\n      while (slow > 0) {\n        if (fast === -1) {\n          fast = slow - 1;\n          slow--;\n          continue;\n        }\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast--;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow - 1;\n            slow--;\n          } else {\n            slow--;\n            fast = slow - 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(b) !== JSON.stringify(oldData)) {\n      addNumber(b);\n    }\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  };\n// Swipe Up\n  const swipeUp = (dummy) => {\n    console.log(\"swipe up\");\n    let b = cloneDeep(data);\n    let oldData = JSON.parse(JSON.stringify(data));\n    for (let i = 0; i < 4; i++) {\n      let slow = 0;\n      let fast = 1;\n      while (slow < 4) {\n        if (fast === 4) {\n          fast = slow + 1;\n          slow++;\n          continue;\n        }\n        if (b[slow][i] === 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] === 0 && b[fast][i] !== 0) {\n          b[slow][i] = b[fast][i];\n          b[fast][i] = 0;\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] === 0) {\n          fast++;\n        } else if (b[slow][i] !== 0 && b[fast][i] !== 0) {\n          if (b[slow][i] === b[fast][i]) {\n            b[slow][i] = b[slow][i] + b[fast][i];\n            b[fast][i] = 0;\n            fast = slow + 1;\n            slow++;\n          } else {\n            slow++;\n            fast = slow + 1;\n          }\n        }\n      }\n    }\n    if (JSON.stringify(oldData) !== JSON.stringify(b)) {\n      addNumber(b);\n    }\n    if (dummy) {\n      return b;\n    } else {\n      setData(b);\n    }\n  };\n\n\n// CheckGameover\nconst checkIfGameOver = () => {\n  console.log(\"CHECKING GAME OVER\");\n  // let original = cloneDeep(data);\n  let checker = swipeLeft(true);\n\n  if (JSON.stringify(data) !== JSON.stringify(checker)) {\n    return false;\n  }\n\n  let checker2 = swipeDown(true);\n  console.log(\"CHECKER DOWN\");\n  console.table(data);\n  console.table(checker2);\n  if (JSON.stringify(data) !== JSON.stringify(checker2)) {\n    return false;\n  }\n\n  let checker3 = swipeRight(true);\n\n  if (JSON.stringify(data) !== JSON.stringify(checker3)) {\n    return false;\n  }\n\n  let checker4 = swipeUp(true);\n\n  if (JSON.stringify(data) !== JSON.stringify(checker4)) {\n    return false;\n  }\n\n  return true;\n};\n\n\n// Reset\n\n\n// HANDLE KEY DOWN\nconst handleKeyDown = (event) => {\n  \n  switch (event.keyCode) {\n    case UP_ARROW:\n      // alert(\"up\");\n      // console.table(data);\n      swipeUp();\n      // console.table(data);\n      break;\n    case DOWN_ARROW:\n      // console.table(data);\n      swipeDown();\n      // console.table(data);\n      break;\n    case LEFT_ARROW:\n      // console.table(data);\n      swipeLeft();\n      // console.table(data);\n      break;\n    case RIGHT_ARROW:\n      // console.table(data);\n      swipeRight();\n      // console.table(data);\n      break;\n    default:\n      break;\n  }\n\n};\n\n\n\nuseEffect(() => {\n  initialize();\n  //document.addEventListener('keydown',handleKeyDown);\n  // eslint-disable-next-line\n}, []);\n\n  useEvent(\"keydown\",handleKeyDown);\n\n    return(\n      <div \n      style={{\n        background: \"#AD9D8F\",\n        width: \"max-content\",\n        height: \"max-content\",\n        margin: \"auto\",\n        padding: 5,\n        borderRadius: 5,\n        marginTop: 10,\n        position: \"relative\",\n      }}\n      >\n          {data.map((row, oneIndex) => {\n              return (\n                <div style={{ display: \"flex\" }} key={oneIndex}>\n                  {row.map((digit, index) => (\n                    <Block num={digit} key={index} />\n                  ))}\n                </div>\n              );\n            })}\n      </div>\n    );\n}\n\n\n\nconst Block = ({num})=>{\n  const { blockStyle } = style;\n\n  return (\n    <div\n      style={{\n        ...blockStyle,\n        background: getColors(num),\n        color: num === 2 || num === 4 ? \"#645B52\" : \"#F7F4EF\",\n      }}\n    >\n     \n      {num !== 0 ? num : \"\"}\n    </div>\n  );\n}\n\nconst style = {\n  blockStyle: {\n    height: 80,\n    width: 80,\n    background: \"lightgray\",\n    margin: 3,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    fontSize: 45,\n    fontWeight: \"800\",\n    color: \"white\",\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}